Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImageSize=function(e){return new Promise((h=>{const i=document.createElement("img");i.onload=async()=>{0===i.width||0===i.height?h(await(0,t.getSvgSize)(e)):h({width:i.width,height:i.height})},i.crossOrigin="anonymous",i.src=e}))},exports.loadImage=e,exports.cropImage=async function(t,h){const i=await e(t),o=document.createElement("canvas");o.width=2*i.width,o.height=2*i.height,o.getContext("2d").drawImage(i,0,0,o.width,o.height);const n=document.createElement("canvas");n.width=h.width,n.height=h.height;const r=n.getContext("2d");let{cropX:c,cropY:g}=h;const d=o.width*h.cropWidth,s=o.height*h.cropHeight,a=h.width/h.height;let w,m;const p=d/s;return"svg"===h.type?(w=d,m=s):a>=p?(w=d,m=d/a):(w=s*a,m=s),r.drawImage(o,c*o.width,g*o.height,w,m,0,0,n.width,n.height),n.toDataURL("image/png")},exports.getCrop=function(t,e){const{width:h,height:i}=t,o=h/i;let n,r;o>=e.width/e.height?(n=e.width,r=e.width/o):(n=e.height*o,r=e.height);const c=(e.width-n)/2,g=(e.height-r)/2;return{cropX:c/e.width,cropY:g/e.height,cropWidth:n/e.width,cropHeight:r/e.height}};const t=require("./svg");function e(t){return new Promise(((e,h)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=t=>{h(t)},i.crossOrigin="anonymous",i.src=t}))}