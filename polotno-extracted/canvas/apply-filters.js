var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyFilter=function(t,e){var h;const i={filters:[]},r={};e.brightnessEnabled&&(i.filters.push(a.default.Filters.Brighten),i.brightness=e.brightness),e.blurEnabled&&(i.filters.push(a.default.Filters.Blur),i.blurRadius=e.blurRadius,"text"===e.type&&e.lineHeight<1&&(r.offset=e.fontSize)),e.sepiaEnabled&&i.filters.push(a.default.Filters.Sepia),e.grayscaleEnabled&&i.filters.push(a.default.Filters.Grayscale),e.filters.forEach(((t,a)=>{const e=n[a];e&&i.filters.push(e(t.intensity))})),t.setAttrs(i),i.filters.length?t.cache(Object.assign(Object.assign({},r),{pixelRatio:e.store._elementsPixelRatio})):t.clearCache(),null===(h=t.getLayer())||void 0===h||h.batchDraw()};const a=t(require("konva")),n={warm:t=>a=>{const n=a.data;t=Math.max(0,Math.min(1,t));for(let e=0;e<n.length;e+=4){n[e]=Math.min(n[e]+30*t,255),n[e+1]=Math.min(n[e+1]+15*t,255)}return a},cold:t=>a=>{const n=a.data;t=Math.max(0,Math.min(1,t));for(let e=0;e<n.length;e+=4){n[e]=Math.min(n[e]-15*t,255),n[e+1]=Math.min(n[e+1]-10*t,255),n[e+2]=Math.min(n[e+2]+15*t,255)}return a},natural:t=>a=>{const n=a.data;t=Math.max(0,Math.min(1,t));for(let e=0;e<n.length;e+=4){n[e]=Math.min(n[e]*(1+.1*t),255),n[e+1]=Math.min(n[e+1]*(1+.1*t),255),n[e+2]=Math.min(n[e+2]*(1+.1*t),255);const a=(n[e]+n[e+1]+n[e+2])/3;n[e]=Math.min((n[e]-a)*(1+.2*t)+a,255),n[e+1]=Math.min((n[e+1]-a)*(1+.2*t)+a,255),n[e+2]=Math.min((n[e+2]-a)*(1+.2*t)+a,255)}return a},temperature:t=>a=>{const n=a.data;t=Math.max(-1,Math.min(1,t));for(let e=0;e<n.length;e+=4){const a=n[e],h=(n[e+1],n[e+2]);n[e]=Math.min(Math.max(a+15*t,0),255),n[e+2]=Math.min(Math.max(h-15*t,0),255)}return a},contrast:t=>a=>{const n=a.data,e=100*(t=Math.max(-1,Math.min(1,t))),h=259*(e+255)/(255*(259-e));for(let t=0;t<n.length;t+=4){n[t]=Math.min(Math.max(h*(n[t]-128)+128,0),255),n[t+1]=Math.min(Math.max(h*(n[t+1]-128)+128,0),255),n[t+2]=Math.min(Math.max(h*(n[t+2]-128)+128,0),255)}return a},shadows:t=>a=>{const n=a.data;t=Math.max(-1,Math.min(1,t));for(let e=0;e<n.length;e+=4){const a=(n[e]+n[e+1]+n[e+2])/3;if(a<128){const h=1+t*(1-a/128)*2;n[e]=Math.min(Math.max(n[e]*h,0),255),n[e+1]=Math.min(Math.max(n[e+1]*h,0),255),n[e+2]=Math.min(Math.max(n[e+2]*h,0),255)}}return a},white:t=>a=>{const n=a.data;t=Math.max(-1,Math.min(1,t));for(let e=0;e<n.length;e+=4){const a=n[e],h=n[e+1],i=n[e+2],r=(a+h+i)/3;if(r>128){const m=1+t*((r-128)/127);n[e]=Math.min(Math.max(a*m,0),255),n[e+1]=Math.min(Math.max(h*m,0),255),n[e+2]=Math.min(Math.max(i*m,0),255)}}return a},black:t=>a=>{const n=a.data;t=Math.max(-1,Math.min(1,t));for(let e=0;e<n.length;e+=4){const a=n[e],h=n[e+1],i=n[e+2],r=(a+h+i)/3;if(r<128){const m=1+t*((128-r)/128);n[e]=Math.min(Math.max(a*m,0),255),n[e+1]=Math.min(Math.max(h*m,0),255),n[e+2]=Math.min(Math.max(i*m,0),255)}}return a},vibrance:t=>a=>{const n=a.data;t=Math.max(-1,Math.min(1,t));for(let e=0;e<n.length;e+=4){const a=n[e],h=n[e+1],i=n[e+2],r=Math.max(a,h,i),m=t<0?(1-(0===r?0:(r-(a+h+i)/3)/r))*t*1.5:.5*t;n[e]=Math.min(Math.max(a-(r-a)*m,0),255),n[e+1]=Math.min(Math.max(h-(r-h)*m,0),255),n[e+2]=Math.min(Math.max(i-(r-i)*m,0),255)}return a},saturation:t=>a=>{const n=a.data;t=Math.max(-1,Math.min(1,t));for(let e=0;e<n.length;e+=4){const a=n[e],h=n[e+1],i=n[e+2],r=.2126*a+.7152*h+.0722*i;n[e]=Math.min(Math.max(r+(a-r)*(1+t),0),255),n[e+1]=Math.min(Math.max(r+(h-r)*(1+t),0),255),n[e+2]=Math.min(Math.max(r+(i-r)*(1+t),0),255)}return a}};