var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PhotosPanel=void 0;const t=e(require("react")),r=require("@blueprintjs/core"),l=require("@blueprintjs/icons"),a=require("./images-grid"),s=require("../utils/use-api"),u=require("../utils/l10n"),n=require("../utils/api"),o=require("./select-image");exports.PhotosPanel=({store:e})=>{const{setQuery:i,loadMore:c,isReachingEnd:d,data:m,isLoading:p,error:h}=(0,s.useInfiniteAPI)({defaultQuery:"",getAPI:({page:e,query:t})=>(0,n.unsplashList)({page:e,query:t})});return t.default.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},t.default.createElement(r.InputGroup,{leftIcon:t.default.createElement(l.Search,null),placeholder:(0,u.t)("sidePanel.searchPlaceholder"),onChange:e=>{i(e.target.value)},type:"search",style:{marginBottom:"20px"}}),t.default.createElement("p",{style:{textAlign:"center"}},"Photos by"," ",t.default.createElement("a",{href:"https://unsplash.com/",target:"_blank"},"Unsplash")),t.default.createElement(a.ImagesGrid,{images:null==m?void 0:m.map((e=>e.results)).flat().filter(Boolean),getPreview:e=>e.urls.small,onSelect:async(t,r,l)=>{fetch((0,n.unsplashDownload)(t.id)),(0,o.selectImage)({src:t.urls.regular,store:e,droppedPos:r,targetElement:l})},isLoading:p,error:h,loadMore:!d&&c,getCredit:e=>t.default.createElement("span",null,"Photo by"," ",t.default.createElement("a",{href:`https://unsplash.com/@${e.user.username}?utm_source=polotno&utm_medium=referral`,target:"_blank"},e.user.name)," ","on"," ",t.default.createElement("a",{href:"https://unsplash.com/?utm_source=polotno&utm_medium=referral",target:"_blank"},"Unsplash"))}))};