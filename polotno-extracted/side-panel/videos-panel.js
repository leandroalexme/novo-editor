var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.VideosPanel=void 0;const t=e(require("react")),r=require("@blueprintjs/core"),l=require("../utils/use-api"),a=require("../utils/l10n"),i=require("./select-video"),o=require("../utils/validate-key"),s=require("mobx-react-lite"),n=require("./videos-grid"),u=require("@blueprintjs/icons");exports.VideosPanel=(0,s.observer)((({store:e})=>{const{setQuery:s,loadMore:d,isReachingEnd:p,data:c,isLoading:f,error:g}=(0,l.useInfiniteAPI)({defaultQuery:"",getAPI:({page:e,query:t})=>(({query:e,page:t})=>`https://api.polotno.com/api/pexels/videos/${e?"search":"popular"}?query=${e}&per_page=20&page=${t}&KEY=${(0,o.getKey)()}`)({page:e,query:t}),getSize:e=>e.total_results/e.per_page});return t.default.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},t.default.createElement(r.InputGroup,{leftIcon:t.default.createElement(u.Search,null),placeholder:(0,a.t)("sidePanel.searchPlaceholder"),onChange:e=>{s(e.target.value)},type:"search",style:{marginBottom:"20px"}}),t.default.createElement("p",{style:{textAlign:"center"}},"Videos by"," ",t.default.createElement("a",{href:"https://www.pexels.com/",target:"_blank"},"Pexels")),t.default.createElement(n.VideosGrid,{items:null==c?void 0:c.map((e=>e.videos)).flat().filter(Boolean),onSelect:async(t,r,l)=>{var a;const o=(null===(a=t.video_files.find((e=>"hd"===e.quality)))||void 0===a?void 0:a.link)||t.video_files[0].link;(0,i.selectVideo)({src:o,store:e,droppedPos:r,targetElement:l,attrs:{width:t.width,height:t.height}})},isLoading:f,error:g,loadMore:!p&&d,getCredit:e=>t.default.createElement("span",null,"Video by"," ",t.default.createElement("a",{href:e.user.url,target:"_blank",rel:"noreferrer"},e.user.name)," ","on"," ",t.default.createElement("a",{href:"https://pexels.com/?utm_source=polotno&utm_medium=referral",target:"_blank",rel:"noreferrer noopener"},"Pexels"))}))}));