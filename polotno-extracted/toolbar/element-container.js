var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ElementContainer=exports.extendToolbar=void 0;const t=e(require("react")),r=require("@blueprintjs/core"),n=require("@blueprintjs/core"),o=e(require("../utils/styled")),l=require("../utils/screen"),s=require("@blueprintjs/icons"),a=(0,o.default)("div",t.default.forwardRef)`
  ${(0,l.mobileStyle)("\n    width: auto !important;\n  ")}
`;exports.extendToolbar=({type:e,usedItems:t,components:r})=>{const n=[];return Object.keys(r).forEach((o=>{0===o.toLowerCase().indexOf(e)&&o.toLowerCase()!==e&&(r[o]?t.includes(o)||n.push(o):console.error(`Polotno error: Toolbar has invalid React component "${o}"`))})),t.filter((e=>Boolean(e))).concat(n)},exports.ElementContainer=({items:e,itemRender:o})=>{const[l,i]=t.default.useState(0),u=t.default.useRef(null),c=()=>{if(null===u.current){return}const e=u.current.parentElement;let t=0;[...u.current.parentElement.children].forEach((e=>{e!==u.current&&(t+=e.offsetWidth)})),i(Math.max(20,e.offsetWidth-t-10))};return t.default.useLayoutEffect((()=>{c()})),t.default.useLayoutEffect((()=>{const e=u.current.parentElement,t=null==e?void 0:e.parentElement;if(window.ResizeObserver){const r=new ResizeObserver(c);e&&r.observe(e),t&&r.observe(t);const n=new MutationObserver(c);return e&&n.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),()=>{r.disconnect(),n.disconnect()}}{const e=setInterval(c,100);return()=>clearInterval(e)}}),[]),t.default.createElement(a,{style:{width:l+"px"},ref:u,className:"bp5-navbar-group bp5-align-left"},t.default.createElement(r.OverflowList,{items:e,style:{width:"100%"},visibleItemRenderer:o,collapseFrom:r.Boundary.END,overflowRenderer:e=>t.default.createElement(n.Popover,{content:t.default.createElement("div",{style:{padding:"10px",display:"flex"}},e.map(o)),position:r.Position.BOTTOM},t.default.createElement(r.Button,{icon:t.default.createElement(s.More,null),minimal:!0,style:{marginLeft:"10px"},onMouseDownCapture:e=>{e.preventDefault()}}))}))};