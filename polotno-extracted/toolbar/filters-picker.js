var e=this&&this.__rest||function(e,t){var a={};for(var n in e){Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n])}if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++){t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]])}}return a},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.EffectsPicker=exports.FiltersPicker=exports.NumberInput=void 0;const a=t(require("react")),n=require("@blueprintjs/core"),l=require("@blueprintjs/core"),r=require("mobx-react-lite"),d=require("@blueprintjs/icons"),o=t(require("./color-picker")),i=require("../utils/l10n"),u=(e,t,a)=>Math.max(t,Math.min(a,e));exports.NumberInput=t=>{var{value:l,onValueChange:r}=t,d=e(t,["value","onValueChange"]);const[o,i]=a.default.useState(l.toString());return a.default.useEffect((()=>{i(l.toString())}),[l]),a.default.createElement(n.NumericInput,Object.assign({value:o,onValueChange:(e,t)=>{i(t),Number.isNaN(e)||r(e)}},d))};const c=({label:e,enabled:t,visible:l=!0,onEnabledChange:r,numberValue:d,onNumberValueChange:o,min:i,max:c})=>l?a.default.createElement(a.default.Fragment,null,a.default.createElement(n.Switch,{checked:t,label:e,onChange:e=>{r(e.target.checked)},alignIndicator:n.Alignment.RIGHT,style:{marginTop:"20px"}}),t&&a.default.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},a.default.createElement("div",{style:{paddingTop:"7px"}},a.default.createElement(n.Slider,{value:d,onChange:e=>{o(e)},min:i,max:c,labelStepSize:50,showTrackFill:!1,labelRenderer:!1})),a.default.createElement(n.NumericInput,{value:d,onValueChange:e=>{o(u(e,i,c))},buttonPosition:"none",style:{width:"45px",padding:"0 5px",marginLeft:"10px"},min:i,max:c}))):null;exports.FiltersPicker=(0,r.observer)((({element:e,store:t,elements:r})=>{const s=r||[e],m=s[0],p="text"===m.type,f="image"===m.type,h="svg"===m.type,g=f||h,b=e=>{t.history.transaction((()=>{s.forEach((t=>{t.set(e)}))}))};return a.default.createElement(l.Popover,{content:a.default.createElement("div",{style:{padding:"15px",paddingTop:"15px",width:"230px",maxHeight:"calc(100vh - 150px)",overflow:"auto"}},a.default.createElement(c,{label:(0,i.t)("toolbar.blur"),enabled:m.blurEnabled,visible:g||p,onEnabledChange:e=>{b({blurEnabled:e})},numberValue:m.blurRadius,onNumberValueChange:e=>{b({blurRadius:e})},min:0,max:100}),a.default.createElement(c,{label:(0,i.t)("toolbar.brightness"),visible:g,enabled:m.brightnessEnabled,onEnabledChange:e=>{b({brightnessEnabled:e})},numberValue:100*m.brightness+100,onNumberValueChange:e=>{b({brightness:(e-100)/100})},min:0,max:200}),g&&a.default.createElement(n.Switch,{checked:m.sepiaEnabled,label:(0,i.t)("toolbar.sepia"),onChange:e=>{b({sepiaEnabled:e.target.checked})},alignIndicator:n.Alignment.RIGHT,style:{marginTop:"20px"}}),g&&a.default.createElement(n.Switch,{checked:m.grayscaleEnabled,label:(0,i.t)("toolbar.grayscale"),onChange:e=>{b({grayscaleEnabled:e.target.checked})},alignIndicator:n.Alignment.RIGHT,style:{marginTop:"20px"}}),p&&a.default.createElement(n.Switch,{checked:!!m.strokeWidth,label:(0,i.t)("toolbar.textStroke"),onChange:e=>{b({strokeWidth:e.target.checked?2:0})},alignIndicator:n.Alignment.RIGHT,style:{marginTop:"20px"}}),p&&!!m.strokeWidth&&a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},a.default.createElement(o.default,{value:m.stroke,size:30,onChange:e=>{b({stroke:e})},store:t}),a.default.createElement(n.NumericInput,{defaultValue:m.strokeWidth,onValueChange:e=>{b({strokeWidth:u(e,1,30)})},style:{width:"80px"},min:1,max:Math.round(m.fontSize/2)}))),p&&a.default.createElement(n.Switch,{checked:!!m.backgroundEnabled,label:(0,i.t)("toolbar.textBackground"),onChange:e=>{b({backgroundEnabled:e.target.checked})},alignIndicator:n.Alignment.RIGHT,style:{marginTop:"20px"}}),!!m.backgroundEnabled&&a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"5px",paddingBottom:"5px"}},a.default.createElement("div",null,(0,i.t)("toolbar.backgroundCornerRadius")),a.default.createElement("div",null,a.default.createElement(exports.NumberInput,{value:100*m.backgroundCornerRadius,onValueChange:e=>{b({backgroundCornerRadius:u(e,0,100)/100})},style:{width:"50px"},min:0,max:100,buttonPosition:"none"}))),a.default.createElement(n.Slider,{value:100*m.backgroundCornerRadius,onChange:e=>{b({backgroundCornerRadius:u(e,0,100)/100})},min:0,max:100,labelRenderer:!1}),a.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"5px",paddingBottom:"5px"}},a.default.createElement("div",null,(0,i.t)("toolbar.backgroundPadding")),a.default.createElement("div",null,a.default.createElement(exports.NumberInput,{value:Math.round(100*m.backgroundPadding),onValueChange:e=>{b({backgroundPadding:u(e,0,100)/100})},style:{width:"50px"},min:0,max:100,buttonPosition:"none"}))),a.default.createElement(n.Slider,{value:Math.round(100*m.backgroundPadding),onChange:e=>{b({backgroundPadding:u(e,0,100)/100})},min:0,max:100,labelRenderer:!1}),a.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"5px",paddingBottom:"5px"}},a.default.createElement("div",null,(0,i.t)("toolbar.opacity")),a.default.createElement("div",null,a.default.createElement(exports.NumberInput,{value:Math.round(100*m.backgroundOpacity),onValueChange:e=>{b({backgroundOpacity:e/100})},style:{width:"50px"},min:0,max:100,buttonPosition:"none"}))),a.default.createElement(n.Slider,{value:100*m.backgroundOpacity,onChange:e=>{b({backgroundOpacity:e/100})},min:0,max:100,labelRenderer:!1}),a.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"5px",paddingBottom:"5px"}},a.default.createElement("div",{style:{lineHeight:"30px"}},(0,i.t)("toolbar.color")),a.default.createElement(o.default,{value:m.backgroundColor,size:30,onChange:e=>{b({backgroundColor:e})},store:t}))),g&&a.default.createElement(n.Switch,{checked:!!m.borderSize,label:(0,i.t)("toolbar.border"),onChange:e=>{b({borderSize:e.target.checked?2:0})},alignIndicator:n.Alignment.RIGHT,style:{marginTop:"20px"}}),!!m.borderSize&&a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},a.default.createElement(o.default,{value:m.borderColor,size:30,onChange:e=>{b({borderColor:e})},store:t}),a.default.createElement(n.NumericInput,{defaultValue:m.borderSize,onValueChange:e=>{b({borderSize:u(e,1,Math.min(m.width,m.height)/2)})},style:{width:"80px"},min:1,max:Math.max(1,Math.min(m.width,m.height)/2)}))),g&&a.default.createElement(n.Switch,{checked:!!m.cornerRadius,label:(0,i.t)("toolbar.cornerRadius"),onChange:e=>{b({cornerRadius:e.target.checked?Math.min(m.width/4,m.height/4):0})},alignIndicator:n.Alignment.RIGHT,style:{marginTop:"20px"}}),g&&!!m.cornerRadius&&a.default.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-between"}},a.default.createElement("div",{style:{width:"150px",paddingTop:"7px"}},a.default.createElement(n.Slider,{value:Math.min(m.cornerRadius,Math.round(Math.min(m.width/2,m.height/2))),onChange:e=>{b({cornerRadius:e})},min:1,max:Math.round(Math.min(m.width/2,m.height/2)),labelStepSize:50,showTrackFill:!1,labelRenderer:!1})),a.default.createElement(n.NumericInput,{value:m.cornerRadius,onValueChange:e=>{b({cornerRadius:u(e,1,Math.min(m.width,m.height)/2)})},buttonPosition:"none",style:{width:"45px",padding:"0 5px"},min:1,max:Math.round(Math.min(m.width/2,m.height/2))})),a.default.createElement(n.Switch,{checked:m.shadowEnabled,label:(0,i.t)("toolbar.shadow"),onChange:e=>{b({shadowEnabled:e.target.checked})},alignIndicator:n.Alignment.RIGHT,style:{marginTop:"20px"}}),m.shadowEnabled&&a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"5px",paddingBottom:"5px"}},a.default.createElement("div",null,(0,i.t)("toolbar.blur")),a.default.createElement("div",null,a.default.createElement(exports.NumberInput,{value:m.shadowBlur,onValueChange:e=>{b({shadowBlur:u(e,-50,50)})},style:{width:"50px"},min:0,max:50,buttonPosition:"none"}))),a.default.createElement(n.Slider,{value:m.shadowBlur,onChange:e=>{b({shadowBlur:e})},min:0,max:50,showTrackFill:!1,labelRenderer:!1}),a.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"5px",paddingBottom:"5px"}},a.default.createElement("div",null,(0,i.t)("toolbar.offsetX")),a.default.createElement("div",null,a.default.createElement(exports.NumberInput,{value:m.shadowOffsetX,onValueChange:e=>{b({shadowOffsetX:u(e,-50,50)})},style:{width:"50px"},min:-50,max:50,buttonPosition:"none"}))),a.default.createElement(n.Slider,{value:m.shadowOffsetX,onChange:e=>{b({shadowOffsetX:e})},min:-50,max:50,showTrackFill:!1,labelRenderer:!1}),a.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"5px",paddingBottom:"5px"}},a.default.createElement("div",null,(0,i.t)("toolbar.offsetY")),a.default.createElement("div",null,a.default.createElement(exports.NumberInput,{value:m.shadowOffsetY,onValueChange:e=>{b({shadowOffsetY:u(e,-50,50)})},style:{width:"50px"},min:-50,max:50,buttonPosition:"none"}))),a.default.createElement(n.Slider,{value:m.shadowOffsetY,onChange:e=>{b({shadowOffsetY:e})},min:-50,max:50,showTrackFill:!1,labelRenderer:!1}),a.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"5px",paddingBottom:"5px"}},a.default.createElement("div",null,(0,i.t)("toolbar.opacity")),a.default.createElement("div",null,a.default.createElement(exports.NumberInput,{value:Math.round(100*m.shadowOpacity),onValueChange:e=>{b({shadowOpacity:e/100})},style:{width:"50px"},min:0,max:100,buttonPosition:"none"}))),a.default.createElement(n.Slider,{value:100*m.shadowOpacity,onChange:e=>{b({shadowOpacity:e/100})},min:0,max:100,labelRenderer:!1}),a.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"5px",paddingBottom:"5px"}},a.default.createElement("div",{style:{lineHeight:"30px"}},(0,i.t)("toolbar.color")),a.default.createElement(o.default,{value:m.shadowColor,size:30,onChange:e=>{b({shadowColor:e})},store:t})))),position:n.Position.BOTTOM},a.default.createElement(n.Button,{icon:a.default.createElement(d.LeftJoin,null),text:(0,i.t)("toolbar.effects"),minimal:!0}))})),exports.EffectsPicker=(0,r.observer)((({element:e,store:t})=>e.contentEditable?a.default.createElement(n.Button,{minimal:!0,icon:a.default.createElement(d.LeftJoin,null),text:(0,i.t)("toolbar.effects"),onClickCapture:e=>{e.stopPropagation(),t.openSidePanel("effects")}}):null)),exports.default=exports.EffectsPicker;