Object.defineProperty(exports,"__esModule",{value:!0}),exports.Node=void 0;const e=require("mobx-state-tree"),t=require("nanoid"),r=require("./store"),o=require("./page-model"),n=require("./group-model");exports.Node=e.types.model("Node",{id:e.types.identifier,type:"none",name:"",opacity:1,custom:e.types.frozen(),visible:!0,selectable:!0,removable:!0,alwaysOnTop:!1,showInExport:!0}).preProcessSnapshot((e=>{for(var t in e){null===e[t]&&(e[t]=void 0)}return e})).postProcessSnapshot((e=>{const t=Object.assign({},e),r={};for(var o in t){"_"!==o[0]&&(r[o]=e[o])}return r})).views((t=>({get locked(){return!(t.draggable||t.contentEditable||t.styleEditable||t.resizable)},get page(){return(0,e.getParentOfType)(t,o.Page)},get store(){return(0,e.getParentOfType)(t,r.Store)},get top(){let r=t;for(;;){if(!(0,e.hasParentOfType)(r,n.GroupElement)){return r}r=(0,e.getParentOfType)(r,n.GroupElement)}},get parent(){return(0,e.hasParentOfType)(t,n.GroupElement)?(0,e.getParentOfType)(t,n.GroupElement):(0,e.hasParentOfType)(t,o.Page)?(0,e.getParentOfType)(t,o.Page):(0,e.hasParentOfType)(t,r.Store)?(0,e.getParentOfType)(t,r.Store):null},get zIndex(){return t.parent.children.indexOf(t)}}))).actions((t=>({toJSON:()=>Object.assign({},(0,e.getSnapshot)(t))}))).actions((e=>({clone(r={},{skipSelect:o=!1}={}){const a=JSON.parse(JSON.stringify(e.toJSON()));return r.id=r.id||(0,t.nanoid)(10),(0,n.forEveryChild)(a,(e=>{e.id=(0,t.nanoid)(10)})),Object.assign(a,r),e.page.addElement(a,{skipSelect:o})},set(t){Object.assign(e,t)},moveUp(){e.page.moveElementsUp([e.id])},moveTop(){e.page.moveElementsTop([e.id])},moveDown(){e.page.moveElementsDown([e.id])},moveBottom(){e.page.moveElementsBottom([e.id])},setZIndex(t){e.parent.setElementZIndex(e.id,t)},beforeDestroy(){}})));