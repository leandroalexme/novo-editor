var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PositionPicker=void 0;const t=e(require("react")),l=require("mobx-react-lite"),n=require("@blueprintjs/core"),o=require("@blueprintjs/core"),i=require("@blueprintjs/icons"),a=require("../utils/math"),c=require("../utils/l10n"),s=e=>{if("group"!==e.type){return(0,a.getClientRect)(e)}let t=1/0,l=1/0,n=-1/0,o=-1/0;return e.children.forEach((e=>{const i=s(e);t=Math.min(t,i.x),l=Math.min(l,i.y),n=Math.max(n,i.x+i.width),o=Math.max(o,i.y+i.height)})),{x:t,y:l,width:n-t,height:o-l}},d=(e,t,l)=>{if("group"!==e.type){const n=(0,a.getClientRect)(e),o=t-n.x,i=l-n.y;e.set({x:e.x+o,y:e.y+i})}else{const n=t-s(e).x,o=l-s(e).y;e.children.forEach((e=>{const t=s(e);d(e,t.x+n,t.y+o)}))}};exports.PositionPicker=(0,l.observer)((({store:e})=>{var l,a,r,m;const u=e.selectedElements.length>0,h=e.selectedElementsIds,v=e.selectedElements.every((e=>e.draggable)),E=v&&e.selectedElements.length>1;return t.default.createElement(o.Popover,{disabled:!u,content:t.default.createElement(n.Menu,{style:{width:"280px"}},t.default.createElement(n.MenuDivider,{title:(0,c.t)("toolbar.layering")}),t.default.createElement("div",{style:{display:"flex"}},t.default.createElement("div",{style:{width:"50%"}},t.default.createElement(n.MenuItem,{shouldDismissPopover:!1,icon:t.default.createElement(i.ChevronUp,null),text:(0,c.t)("toolbar.up"),disabled:!(null===(l=e.activePage)||void 0===l?void 0:l.canMoveElementsUp(h)),onClick:()=>{var t;null===(t=e.activePage)||void 0===t||t.moveElementsUp(h)}}),t.default.createElement(n.MenuItem,{shouldDismissPopover:!1,icon:t.default.createElement(i.DoubleChevronUp,null),text:(0,c.t)("toolbar.toForward"),disabled:!(null===(a=e.activePage)||void 0===a?void 0:a.canMoveElementsTop(h)),onClick:()=>{var t;null===(t=e.activePage)||void 0===t||t.moveElementsTop(h)}})),t.default.createElement("div",{style:{width:"50%"}},t.default.createElement(n.MenuItem,{shouldDismissPopover:!1,icon:t.default.createElement(i.ChevronDown,null),text:(0,c.t)("toolbar.down"),disabled:!(null===(r=e.activePage)||void 0===r?void 0:r.canMoveElementsDown(h)),onClick:()=>{var t;null===(t=e.activePage)||void 0===t||t.moveElementsDown(h)}}),t.default.createElement(n.MenuItem,{shouldDismissPopover:!1,icon:t.default.createElement(i.DoubleChevronDown,null),text:(0,c.t)("toolbar.toBottom"),disabled:!(null===(m=e.activePage)||void 0===m?void 0:m.canMoveElementsBottom(h)),onClick:()=>{var t;null===(t=e.activePage)||void 0===t||t.moveElementsBottom(h)}}))),v&&t.default.createElement(t.default.Fragment,null,t.default.createElement(n.MenuDivider,{title:(0,c.t)("toolbar.position")}),t.default.createElement("div",{style:{display:"flex"}},t.default.createElement("div",{style:{width:"50%"}},t.default.createElement(n.MenuItem,{shouldDismissPopover:!1,icon:t.default.createElement(i.AlignmentLeft,null),text:(0,c.t)("toolbar.alignLeft"),onClick:()=>{var t;let l=null===(t=e.activePage)||void 0===t?void 0:t.computedWidth;e.selectedElements.forEach((e=>{l=Math.min(l,s(e).x)})),1===e.selectedElements.length&&(l=0),e.selectedElements.forEach((e=>{const t=s(e);d(e,t.x-t.x+l,t.y)}))}}),t.default.createElement(n.MenuItem,{shouldDismissPopover:!1,icon:t.default.createElement(i.AlignmentVerticalCenter,null),text:(0,c.t)("toolbar.alignCenter"),onClick:()=>{var t,l;let n=null===(t=e.activePage)||void 0===t?void 0:t.computedWidth,o=0;e.selectedElements.forEach((e=>{const t=s(e);n=Math.min(n,t.x),o=Math.max(o,t.x+t.width)}));let i=(o+n)/2;1===e.selectedElements.length&&(i=(null===(l=e.activePage)||void 0===l?void 0:l.computedWidth)/2),e.selectedElements.forEach((e=>{const t=s(e);d(e,i-t.width/2,t.y)}))}}),t.default.createElement(n.MenuItem,{shouldDismissPopover:!1,icon:t.default.createElement(i.AlignmentRight,null),text:(0,c.t)("toolbar.alignRight"),onClick:()=>{var t;let l=0;e.selectedElements.forEach((e=>{const t=s(e);l=Math.max(l,t.x+t.width)})),1===e.selectedElements.length&&(l=null===(t=e.activePage)||void 0===t?void 0:t.computedWidth),e.selectedElements.forEach((e=>{const t=s(e);d(e,l-t.width,t.y)}))}})),t.default.createElement("div",{style:{width:"50%"}},t.default.createElement(n.MenuItem,{shouldDismissPopover:!1,icon:t.default.createElement(i.AlignmentTop,null),text:(0,c.t)("toolbar.alignTop"),onClick:()=>{var t;let l=null===(t=e.activePage)||void 0===t?void 0:t.computedHeight;e.selectedElements.forEach((e=>{l=Math.min(l,s(e).y)})),1===e.selectedElements.length&&(l=0),e.selectedElements.forEach((e=>{const t=s(e);d(e,t.x,t.y-t.y+l)}))}}),t.default.createElement(n.MenuItem,{shouldDismissPopover:!1,icon:t.default.createElement(i.AlignmentHorizontalCenter,null),text:(0,c.t)("toolbar.alignMiddle"),onClick:()=>{var t,l;let n=null===(t=e.activePage)||void 0===t?void 0:t.computedHeight,o=0;e.selectedElements.forEach((e=>{const t=s(e);n=Math.min(n,t.y),o=Math.max(o,t.y+t.height)}));let i=(o+n)/2;1===e.selectedElements.length&&(i=(null===(l=e.activePage)||void 0===l?void 0:l.computedHeight)/2),e.selectedElements.forEach((e=>{const t=s(e);d(e,t.x,i-t.height/2)}))}}),t.default.createElement(n.MenuItem,{shouldDismissPopover:!1,icon:t.default.createElement(i.AlignmentBottom,null),text:(0,c.t)("toolbar.alignBottom"),onClick:()=>{var t;let l=0;e.selectedElements.forEach((e=>{const t=s(e);l=Math.max(l,t.y+t.height)})),1===e.selectedElements.length&&(l=null===(t=e.activePage)||void 0===t?void 0:t.computedHeight),e.selectedElements.forEach((e=>{const t=s(e);d(e,t.x,l-t.height)}))}})))),E&&t.default.createElement(t.default.Fragment,null,t.default.createElement(n.MenuDivider,{title:(0,c.t)("toolbar.spaceEvenly")}),t.default.createElement("div",{style:{display:"flex"}},t.default.createElement("div",{style:{width:"50%"}},t.default.createElement(n.MenuItem,{shouldDismissPopover:!1,icon:t.default.createElement(i.VerticalDistribution,null),text:(0,c.t)("toolbar.verticalDistribution"),onClick:()=>{var t;let l=null===(t=e.activePage)||void 0===t?void 0:t.computedHeight,n=0,o=0;e.selectedElements.forEach((e=>{const t=s(e);l=Math.min(l,t.y),n=Math.max(n,t.y+t.height),o+=t.height}));const i=(n-l-o)/(e.selectedElements.length-1),a=e.selectedElements.slice().sort(((e,t)=>{const l=s(e),n=s(t);return l.y-n.y}));let c=0;a.forEach((e=>{const t=s(e);d(e,t.x,l+c),c+=t.height+i}))}})),t.default.createElement("div",{style:{width:"50%"}},t.default.createElement(n.MenuItem,{shouldDismissPopover:!1,icon:t.default.createElement(i.HorizontalDistribution,null),text:(0,c.t)("toolbar.horizontalDistribution"),onClick:()=>{var t;let l=null===(t=e.activePage)||void 0===t?void 0:t.computedWidth,n=0,o=0;e.selectedElements.forEach((e=>{const t=s(e);l=Math.min(l,t.x),n=Math.max(n,t.x+t.width),o+=t.width}));const i=(n-l-o)/(e.selectedElements.length-1),a=e.selectedElements.slice().sort(((e,t)=>{const l=s(e),n=s(t);return l.x-n.x}));let c=0;a.forEach((e=>{const t=s(e);d(e,l+c,t.y),c+=t.width+i}))}}))))),position:n.Position.BOTTOM},t.default.createElement(n.Button,{icon:t.default.createElement(i.Layers,null),minimal:!0,text:(0,c.t)("toolbar.position"),disabled:!u}))}));