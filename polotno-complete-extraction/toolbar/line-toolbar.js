var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.LineToolbar=exports.LineHeads=exports.BasicHead=exports.LineColor=exports.LineSettings=void 0;const t=e(require("react")),r=require("mobx-react-lite"),n=require("@blueprintjs/core"),a=require("@blueprintjs/core"),o=require("@blueprintjs/icons"),l=e(require("./color-picker")),i=require("./animations-picker"),s=require("./filters-picker"),d=require("./element-container"),c=require("../canvas/line-element"),u=require("../utils/l10n"),m=require("../utils/flags");exports.LineSettings=(0,r.observer)((({store:e,elements:r})=>{const l=t=>{e.history.transaction((()=>{r.forEach((e=>{e.set(t)}))}))},i=t=>{e.history.transaction((()=>{r.forEach((e=>{const{middleLeft:r,middleRight:n}=(0,c.getMiddlePoints)(e),{x:a,y:o,rotation:l}=(0,c.getLinePositionFromMiddlePoints)(r,n,t);e.set({x:a,y:o,rotation:l,height:t})}))}))};return t.default.createElement(a.Popover,{content:t.default.createElement("div",{style:{padding:"15px",paddingTop:"15px",width:"230px"}},t.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:"5px"}},t.default.createElement("div",null,(0,u.t)("toolbar.lineSize")),t.default.createElement("div",null,t.default.createElement(s.NumberInput,{value:r[0].height,onValueChange:e=>{i(e)},style:{width:"50px"},min:1,max:100,buttonPosition:"none"}))),t.default.createElement(n.Slider,{value:r[0].height,onChange:e=>{i(e)},min:1,max:100,labelRenderer:!1}),t.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:"5px",paddingTop:"15px"}},t.default.createElement(n.Button,{onClick:()=>{l({dash:[]})},active:0===r[0].dash.length},t.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("line",{x2:"24",y1:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2"}))),t.default.createElement(n.Button,{onClick:()=>{l({dash:[4,1]})},active:4===r[0].dash[0]},t.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("line",{x1:"-1",x2:"25",y1:"50%",y2:"50%",stroke:"currentColor",strokeDasharray:"12 2",strokeWidth:"2"}))),t.default.createElement(n.Button,{onClick:()=>{l({dash:[2,1]})},active:2===r[0].dash[0]},t.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("line",{x1:"1",x2:"23",y1:"50%",y2:"50%",stroke:"currentColor",strokeDasharray:"6 2",strokeWidth:"2"}))),t.default.createElement(n.Button,{onClick:()=>{l({dash:[1,1]})},active:1===r[0].dash[0]},t.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("line",{x1:"1",x2:"23",y1:"50%",y2:"50%",stroke:"currentColor",strokeDasharray:"2 2",strokeWidth:"2"}))))),position:n.Position.BOTTOM},t.default.createElement(n.Button,{icon:t.default.createElement(o.Settings,null),minimal:!0}))})),exports.LineColor=(0,r.observer)((({elements:e,store:r})=>t.default.createElement(l.default,{value:e[0].color,style:{marginRight:"5px"},gradientEnabled:!1,onChange:t=>r.history.transaction((()=>{e.forEach((e=>{e.set({color:t})}))})),store:r})));const p={"":t.default.createElement("span",{"aria-hidden":"true",className:"bp5-icon"},t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},t.default.createElement("path",{stroke:"currentColor",strokeWidth:"2",d:"M 1 8 L 16 8"}))),arrow:t.default.createElement("span",{"aria-hidden":"true",className:"bp5-icon"},t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},t.default.createElement("path",{stroke:"currentColor",strokeWidth:"2",d:"M 8 3 L 1 8 L 8 13",fill:"none",strokeLinejoin:"round",strokeLinecap:"round"}),t.default.createElement("path",{stroke:"currentColor",strokeWidth:"2",d:"M 1 8 L 15 8",strokeLinejoin:"round",strokeLinecap:"round"}))),triangle:t.default.createElement("span",{"aria-hidden":"true",className:"bp5-icon"},t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},t.default.createElement("path",{stroke:"currentColor",strokeWidth:"2",d:"M 8 3 L 1 8 L 8 13 Z",fill:"currentColor",strokeLinejoin:"round",strokeLinecap:"round"}),t.default.createElement("path",{stroke:"currentColor",strokeWidth:"2",d:"M 1 8 L 15 8",strokeLinejoin:"round",strokeLinecap:"round"}))),bar:t.default.createElement("span",{"aria-hidden":"true",className:"bp5-icon"},t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},t.default.createElement("path",{stroke:"currentColor",strokeWidth:"2",d:"M 1 3 L 1 13",strokeLinejoin:"round",strokeLinecap:"round"}),t.default.createElement("path",{stroke:"currentColor",strokeWidth:"2",d:"M 1 8 L 15 8",strokeLinejoin:"round",strokeLinecap:"round"}))),square:t.default.createElement("span",{"aria-hidden":"true",className:"bp5-icon"},t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},t.default.createElement("path",{stroke:"currentColor",strokeWidth:"2",d:"M 1 4 L 9 4 L 9 12 L 1 12 Z",fill:"currentColor",strokeLinejoin:"round",strokeLinecap:"round"}),t.default.createElement("path",{stroke:"currentColor",strokeWidth:"2",d:"M 1 8 L 15 8",strokeLinejoin:"round",strokeLinecap:"round"}))),circle:t.default.createElement("span",{"aria-hidden":"true",className:"bp5-icon"},t.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},t.default.createElement("circle",{cx:"4",cy:"8",r:"4",fill:"currentColor"}),t.default.createElement("path",{stroke:"currentColor",strokeWidth:"2",d:"M 1 8 L 15 8",strokeLinejoin:"round",strokeLinecap:"round"})))},h=({type:e,active:r,onClick:a,flipped:o})=>{const l=p[e];return t.default.createElement(n.Button,{icon:o?t.default.createElement("span",{style:{transform:"scaleX(-1)"}},l):l,minimal:!0,onClick:a,active:r})};exports.BasicHead=(0,r.observer)((({elements:e,store:r,property:o})=>{const l="endHead"===o,i=p[e[0][o]],s=l?t.default.createElement("span",{style:{transform:"scaleX(-1)"}},i):i,d=t=>{r.history.transaction((()=>{e.forEach((e=>{e.set({[o]:t})}))}))};return t.default.createElement(t.default.Fragment,null,t.default.createElement(a.Popover,{content:t.default.createElement("div",{style:{width:"150px",padding:"10px"}},t.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},["","arrow","triangle"].map((r=>t.default.createElement(h,{key:r,type:r,active:e[0][o]===r,onClick:()=>{d(r)},flipped:l})))),t.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},["bar","square","circle"].map((r=>t.default.createElement(h,{key:r,type:r,active:e[0][o]===r,onClick:()=>{d(r)},flipped:l}))))),position:n.Position.BOTTOM},t.default.createElement(n.Button,{icon:s,minimal:!0})))})),exports.LineHeads=(0,r.observer)((({elements:e,store:r})=>t.default.createElement(t.default.Fragment,null,t.default.createElement(exports.BasicHead,{elements:e,store:r,property:"startHead"}),t.default.createElement(exports.BasicHead,{elements:e,store:r,property:"endHead"}))));const f={LineSettings:exports.LineSettings,LineColor:exports.LineColor,LineHeads:exports.LineHeads,LineAnimations:i.AnimationsPicker};exports.LineToolbar=(0,r.observer)((({store:e,components:r})=>{const n=e.selectedElements[0],a=["LineColor","LineSettings","LineHeads",m.flags.animationsEnabled&&"LineAnimations"].filter((e=>Boolean(e))),o=(0,d.extendToolbar)({type:"line",usedItems:a,components:r});return t.default.createElement(d.ElementContainer,{items:o,itemRender:a=>{const o=r[a]||f[a];return t.default.createElement(o,{element:n,store:e,key:a,elements:e.selectedElements})}})})),exports.default=exports.LineToolbar;