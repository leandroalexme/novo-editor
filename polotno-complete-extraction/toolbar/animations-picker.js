var e=this&&this.__rest||function(e,t){var n={};for(var a in e){Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a])}if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(a=Object.getOwnPropertySymbols(e);l<a.length;l++){t.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]])}}return n},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AnimationsPicker=exports.AnimationsPickerOld=exports.NumberInput=void 0;const n=t(require("react")),a=require("@blueprintjs/core"),l=require("@blueprintjs/select"),i=require("mobx-react-lite"),o=require("../utils/l10n");exports.NumberInput=t=>{var{value:l,onValueChange:i}=t,o=e(t,["value","onValueChange"]);const[r,d]=n.default.useState(l.toString());return n.default.useEffect((()=>{d(l.toString())}),[l]),n.default.createElement(a.NumericInput,Object.assign({value:r,onValueChange:(e,t)=>{d(t),Number.isNaN(e)||i(e)}},o))};const r=(0,i.observer)((({element:e,store:t,enabled:l})=>{const i=e.animations.find((e=>"enter"===e.type)),o=e.animations.find((e=>"exit"===e.type));return l?n.default.createElement(a.ButtonGroup,{style:{width:"100%"}},n.default.createElement(a.Button,{fill:!0,active:(null==i?void 0:i.enabled)&&!(null==o?void 0:o.enabled),onClick:()=>{t.history.transaction((()=>{e.setAnimation("enter",{enabled:!0}),e.setAnimation("exit",{enabled:!1})}))}},"Enter"),n.default.createElement(a.Button,{fill:!0,active:(null==i?void 0:i.enabled)&&(null==o?void 0:o.enabled),onClick:()=>{t.history.transaction((()=>{e.setAnimation("enter",{enabled:!0}),e.setAnimation("exit",{enabled:!0})}))}},"Both"),n.default.createElement(a.Button,{fill:!0,active:(null==o?void 0:o.enabled)&&!(null==i?void 0:i.enabled),onClick:()=>{t.history.transaction((()=>{e.setAnimation("enter",{enabled:!1}),e.setAnimation("exit",{enabled:!0})}))}},"Exit")):null})),d=(e,{handleClick:t,handleFocus:l,modifiers:i,query:o})=>i.matchesPredicate?n.default.createElement(a.MenuItem,{active:i.active,disabled:i.disabled,key:e,onClick:t,icon:"arrow-"+e,onFocus:l,roleStructure:"listoption",text:e,shouldDismissPopover:!1}):null,s=["right","left","up","down","bottom-right","bottom-left","top-right","top-left"],m=(0,i.observer)((({value:e,onChange:t})=>n.default.createElement("div",{style:{paddingTop:"10px"}},n.default.createElement(l.Select,{items:s,itemRenderer:d,filterable:!1,activeItem:e,onItemSelect:e=>{t(e)}},n.default.createElement(a.Button,{text:e,icon:"arrow-"+e,fill:!0}))))),u=(0,i.observer)((({element:e,store:t})=>{const l=e.animations.find((e=>"enter"===e.type));return l?n.default.createElement("div",{style:{padding:"10px"}},n.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"5px",paddingBottom:"5px"}},n.default.createElement("div",null,"Delay"),n.default.createElement("div",null,n.default.createElement(exports.NumberInput,{value:parseFloat((l.delay/1e3).toFixed(2)),onValueChange:t=>{e.setAnimation("enter",{delay:1e3*t})},style:{width:"50px"},minorStepSize:.01,stepSize:.01,min:0,max:2.5,buttonPosition:"none"}))),n.default.createElement(a.Slider,{min:0,max:1e3,value:l.delay,showTrackFill:!1,labelRenderer:!1,onChange:t=>{e.setAnimation("enter",{delay:t})}})):null})),c=(0,i.observer)((({element:e,store:t})=>{const l=e.animations.find((e=>"enter"===e.type));return l?n.default.createElement("div",{style:{padding:"10px"}},n.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"5px",paddingBottom:"5px"}},n.default.createElement("div",null,"Duration"),n.default.createElement("div",null,n.default.createElement(exports.NumberInput,{value:parseFloat((l.duration/1e3).toFixed(2)),onValueChange:t=>{e.setAnimation("enter",{duration:1e3*t}),e.setAnimation("exit",{duration:1e3*t})},style:{width:"50px"},minorStepSize:.01,stepSize:.01,min:0,max:2.5,buttonPosition:"none"}))),n.default.createElement(a.Slider,{min:0,max:2500,value:l.duration,showTrackFill:!1,labelRenderer:!1,onChange:t=>{e.setAnimation("enter",{duration:t}),e.setAnimation("exit",{duration:t})}})):null}));exports.AnimationsPickerOld=(0,i.observer)((({element:e,store:t,elements:l})=>{var i,d;const s=l||[e],p=s[0],f=(p.type,p.type,p.type,(e,n)=>{t.history.transaction((()=>{s.forEach((t=>{t.setAnimation("enter",Object.assign({name:e},n)),t.setAnimation("exit",Object.assign(Object.assign({name:e},n),{from:n.to,to:n.from}))}))})),n.enabled&&(t.play({animatedElementsIds:s.map((e=>e.id)),currentTime:p.page.startTime}),setTimeout((()=>{t.stop()}),1e3))}),b=(e,t)=>{var n;return!!((e?null===(n=p.animations)||void 0===n?void 0:n.filter((t=>t.name===e)):p.animations)||[]).find((e=>e.enabled))};return n.default.createElement(a.Popover,{hasBackdrop:!1,autoFocus:!1,content:n.default.createElement("div",{style:{padding:"15px",paddingTop:"25px",width:"230px"}},n.default.createElement(a.Switch,{checked:b("fade"),label:(0,o.t)("toolbar.fade"),onChange:e=>{f("fade",{enabled:e.target.checked})},alignIndicator:a.Alignment.RIGHT}),n.default.createElement(a.Switch,{checked:b("move"),label:(0,o.t)("toolbar.move"),onChange:e=>{f("move",{enabled:e.target.checked})},alignIndicator:a.Alignment.RIGHT}),n.default.createElement(a.Switch,{checked:b("zoom"),label:(0,o.t)("toolbar.zoom"),onChange:e=>{f("zoom",{enabled:e.target.checked})},alignIndicator:a.Alignment.RIGHT}),n.default.createElement(r,{element:p,store:t,name:"move",enabled:b()}),b("move")&&n.default.createElement(m,{value:(null===(d=null===(i=p.animations.find((e=>"move"===e.name)))||void 0===i?void 0:i.data)||void 0===d?void 0:d.direction)||"right",onChange:e=>{f("move",{data:{direction:e},enabled:!0})}}),b()&&n.default.createElement(u,{store:t,element:e}),b()&&n.default.createElement(c,{store:t,element:e}),n.default.createElement(a.Switch,{checked:b("rotate"),label:(0,o.t)("toolbar.rotate"),onChange:e=>{var n;n={enabled:e.target.checked},t.history.transaction((()=>{s.forEach((e=>{e.setAnimation("loop",Object.assign({name:"rotate"},n))}))})),n.enabled&&(t.play({animatedElementsIds:s.map((e=>e.id)),currentTime:p.page.startTime}),setTimeout((()=>{t.stop()}),1e3))},alignIndicator:a.Alignment.RIGHT})),position:a.Position.BOTTOM},n.default.createElement(a.Button,{text:(0,o.t)("toolbar.animate"),minimal:!0}))})),exports.AnimationsPicker=(0,i.observer)((({element:e,store:t})=>e.contentEditable?n.default.createElement(a.Button,{minimal:!0,text:(0,o.t)("toolbar.animate"),onClickCapture:e=>{e.stopPropagation(),t.openSidePanel("animation")}}):null)),exports.default=exports.AnimationsPicker;