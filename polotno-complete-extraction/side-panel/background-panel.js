var e=this&&this.__rest||function(e,t){var r={};for(var l in e){Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l])}if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(e);a<l.length;a++){t.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(r[l[a]]=e[l[a]])}}return r},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.BackgroundPanel=exports.setBackgroundColorsPreset=exports.setDefaultQuery=void 0;const r=t(require("react")),l=require("mobx-react-lite"),a=require("mobx"),o=require("@blueprintjs/core"),n=require("@blueprintjs/icons"),s=t(require("@meronex/icons/ios/IosColorPalette")),i=require("../toolbar/color-picker"),u=require("./images-grid"),d=t(require("../utils/styled")),c=require("../utils/l10n"),g=require("../utils/use-api"),p=require("../utils/api");let f="gradient";exports.setDefaultQuery=e=>{f=e};const m=(0,a.observable)(["white","rgb(82, 113, 255)","rgb(255, 145, 77)","rgb(126, 217, 87)","rgb(255, 222, 89)","rgb(203, 108, 230)","rgb(0, 0, 0, 0)"]);exports.setBackgroundColorsPreset=e=>{m.replace(e)};const h=(0,d.default)("div")`
  display: inline-block;
  width: 30px;
  height: 30px;
  border-radius: 2px;
  box-shadow: 0 0 2px rgba(16, 22, 26, 0.3);
  cursor: pointer;
`,b=t=>{var{children:l,color:a}=t,o=e(t,["children","color"]);return r.default.createElement(h,Object.assign({},o,{style:Object.assign(Object.assign({},o.style),{background:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='15' height='15' viewBox='0 0 8 8'%3E%3Cg fill='rgba(112, 112, 116, 1)' fill-opacity='1'%3E%3Cpath fill-rule='evenodd' d='M0 0h4v4H0V0zm4 4h4v4H4V4z'/%3E%3C/g%3E%3C/svg%3E\")"})}),r.default.createElement("div",{style:{width:"100%",height:"100%",background:a}},l))};exports.BackgroundPanel=(0,l.observer)((({store:e})=>{var t,l;const{setQuery:a,loadMore:d,isReachingEnd:h,data:v,isLoading:y,error:x}=(0,g.useInfiniteAPI)({defaultQuery:f,getAPI:({page:e,query:t})=>(0,p.unsplashList)({page:e,query:t})});return r.default.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},r.default.createElement("div",{style:{display:"flex",justifyContent:"space-around",paddingBottom:"10px"}},r.default.createElement(i.ColorPicker,{value:(null===(t=e.activePage)||void 0===t?void 0:t.background)||"white",onChange:t=>{var r;null===(r=e.activePage)||void 0===r||r.set({background:t})},store:e,position:"bottom-left",gradientEnabled:!0},r.default.createElement(b,{color:null===(l=e.activePage)||void 0===l?void 0:l.background,style:{fontSize:"30px"}},r.default.createElement(s.default,{style:{mixBlendMode:"difference"}}))),m.map((t=>r.default.createElement(b,{key:t,color:t,onClick:()=>{var r;null===(r=e.activePage)||void 0===r||r.set({background:t})}})))),r.default.createElement(o.InputGroup,{leftIcon:r.default.createElement(n.Search,null),placeholder:(0,c.t)("sidePanel.searchPlaceholder"),onChange:e=>{a(e.target.value||f)},type:"search",style:{marginBottom:"20px"}}),r.default.createElement("p",{style:{textAlign:"center"}},"Photos by"," ",r.default.createElement("a",{href:"https://unsplash.com/",target:"_blank"},"Unsplash")),r.default.createElement(u.ImagesGrid,{images:null==v?void 0:v.map((e=>e.results)).flat().filter(Boolean),isLoading:y,getPreview:e=>e.urls.small,loadMore:!h&&d,onSelect:async t=>{var r;fetch((0,p.unsplashDownload)(t.id)),null===(r=e.activePage)||void 0===r||r.set({background:t.urls.regular})},error:x,getCredit:e=>r.default.createElement("span",null,"Photo by"," ",r.default.createElement("a",{href:`https://unsplash.com/@${e.user.username}?utm_source=polotno&utm_medium=referral`,target:"_blank"},e.user.name)," ","on"," ",r.default.createElement("a",{href:"https://unsplash.com/?utm_source=polotno&utm_medium=referral",target:"_blank"},"Unsplash"))}))}));