var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AiImagesPanel=void 0;const t=e(require("react")),i=require("mobx-react-lite"),a=require("@blueprintjs/core"),r=require("../utils/validate-key"),n=require("../utils/image"),l=require("./images-grid"),o=require("../utils/api");exports.AiImagesPanel=(0,i.observer)((({store:e})=>{const i=t.default.useRef(null),[u,s]=t.default.useState(null),[d,g]=t.default.useState(!1),c=async()=>{g(!0),s(null);const e=await fetch(`${(0,o.getAPI)()}/get-stable-diffusion?KEY=${(0,r.getKey)()}&prompt=${i.current.value}`);if(g(!1),!e.ok){return void alert("Something went wrong, please try again later...")}const t=await e.json();s(t.output[0])};return t.default.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"column"}},t.default.createElement("div",{style:{padding:"15px 0"}},"Stable Diffusion is a latent text-to-image diffusion model capable of generating photo-realistic images given any text input"),t.default.createElement(a.InputGroup,{placeholder:"Type your image generation prompt here...",onKeyDown:e=>{"Enter"===e.key&&c()},style:{marginBottom:"20px"},inputRef:i}),t.default.createElement(a.Button,{onClick:c,intent:"primary",loading:d,style:{marginBottom:"40px"}},"Generate"),u&&t.default.createElement(l.ImagesGrid,{shadowEnabled:!1,images:u?[u]:[],getPreview:e=>e,isLoading:d,onSelect:async(t,i,a)=>{var r;const l=t;if(a&&"svg"===a.type&&a.contentEditable){return void a.set({maskSrc:l})}if(a&&"image"===a.type&&a.contentEditable){return void a.set({src:l})}const{width:o,height:u}=await(0,n.getImageSize)(l),s=((null==i?void 0:i.x)||e.width/2)-o/2,d=((null==i?void 0:i.y)||e.height/2)-u/2;null===(r=e.activePage)||void 0===r||r.addElement({type:"image",src:l,width:o,height:u,x:s,y:d})},rowsNumber:1}))}));